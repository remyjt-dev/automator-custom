(function(){const e="https://default-reply.bubbleapps.io/version-test/api/1.1/wf/saas_check/";function t(){const e=window.location.href.match(/\/location\/([a-zA-Z0-9]+)/);return e?e[1]:null}async function n(t){try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({location_id:t})}),o=await n.json();if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);if("success"!==o.status)throw new Error(o.message||"API request failed");return o}catch(e){throw console.error("SaaS Plan Check Error:",e),e}}function o(e){return!e||"string"!=typeof e||["Paid - Professional","Trial - Professional","Trial - Ultimate","Trial Premium"].includes(e.trim())}function r(e){document.querySelectorAll("#sb_AI\\ Agents").forEach((t=>{e?t.style.display="flex":t.style.display="none"})),console.log(`AI Agents elements ${e?"shown":"hidden"}`)}function s(e){const t=o(e.response.saas_plan);r(!t);const n=document.getElementById("saas-info-display");n&&n.remove();const s=document.createElement("div");s.id="saas-info-display",s.style.cssText="position:fixed;top:20px;right:20px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);z-index:10000;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:14px;max-width:300px";const l=t?"#10b981":"#f59e0b",a=t?"Premium Plan Active":"Basic Plan Active";s.innerHTML=`<div style="display:flex;align-items:center;margin-bottom:12px;"><div style="width:8px;height:8px;background:${l};border-radius:50%;margin-right:8px;"></div><strong style="color:#1f2937;">${a}</strong><button onclick="this.parentElement.parentElement.remove()" style="margin-left:auto;border:none;background:none;font-size:18px;cursor:pointer;color:#6b7280;">&times;</button></div><div style="margin-bottom:8px;"><span style="color:#6b7280;">Plan:</span><strong style="color:#1f2937;margin-left:8px;">${e.response.saas_plan||"Unknown"}</strong></div><div style="margin-bottom:8px;"><span style="color:#6b7280;">Billing:</span><strong style="color:#1f2937;margin-left:8px;">${e.response.saas_pricing||"Unknown"}</strong></div>${t?'<div style="font-size:12px;color:#10b981;margin-top:8px;font-weight:500;">AI Agents features are hidden</div>':'<div style="font-size:12px;color:#f59e0b;margin-top:8px;font-weight:500;">AI Agents features are visible</div>'}<div style="font-size:12px;color:#9ca3af;margin-top:12px;">Location ID: ${e.location_id||"N/A"}</div>`,document.body.appendChild(s),setTimeout((()=>{document.getElementById("saas-info-display")&&s.remove()}),1e4)}function l(){const e=document.createElement("div");e.id="saas-loading-display",e.style.cssText="position:fixed;top:20px;right:20px;background:#fff;border:1px solid #e2e8f0;border-radius:8px;padding:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);z-index:10000;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:14px;max-width:300px",e.innerHTML='<div style="display:flex;align-items:center;"><div style="width:16px;height:16px;border:2px solid #e5e7eb;border-top:2px solid #3b82f6;border-radius:50%;animation:spin 1s linear infinite;margin-right:12px;"></div><span style="color:#1f2937;">Checking SaaS plan...</span></div><style>@keyframes spin{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}</style>',document.body.appendChild(e)}function a(e){r(!1);const t=document.getElementById("saas-loading-display");t&&t.remove();const n=document.createElement("div");n.id="saas-error-display",n.style.cssText="position:fixed;top:20px;right:20px;background:#fef2f2;border:1px solid #fecaca;border-radius:8px;padding:16px;box-shadow:0 4px 6px -1px rgba(0,0,0,0.1);z-index:10000;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;font-size:14px;max-width:300px",n.innerHTML=`<div style="display:flex;align-items:center;margin-bottom:8px;"><div style="width:8px;height:8px;background:#ef4444;border-radius:50%;margin-right:8px;"></div><strong style="color:#dc2626;">SaaS Check Failed</strong><button onclick="this.parentElement.parentElement.remove()" style="margin-left:auto;border:none;background:none;font-size:18px;cursor:pointer;color:#dc2626;">&times;</button></div><div style="color:#dc2626;">${e}</div><div style="font-size:12px;color:#dc2626;margin-top:8px;font-weight:500;">AI Agents features are hidden</div>`,document.body.appendChild(n),setTimeout((()=>{document.getElementById("saas-error-display")&&n.remove()}),8e3)}async function i(){const e=t();if(!e)return console.warn("SaaS Check: No location_id found in URL"),void r(!1);console.log("SaaS Check: Found location_id:",e);try{l();const t=await n(e),o=document.getElementById("saas-loading-display");o&&o.remove(),t.location_id=e,s(t),console.log("SaaS Check Success:",t)}catch(e){a(e.message),console.error("SaaS Check Failed:",e)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i();let c=window.location.href;new MutationObserver((()=>{window.location.href!==c&&(c=window.location.href,setTimeout(i,1e3))})).observe(document.body,{childList:!0,subtree:!0}),window.checkSaasPlan=i})();