(function(){const e="https://default-reply.bubbleapps.io/version-test/api/1.1/wf/saas_check/";function t(){const e=window.location.href.match(/\/location\/([a-zA-Z0-9]+)/);return e?e[1]:null}async function n(t){try{const n=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({location_id:t})}),o=await n.json();if(!n.ok)throw new Error(`HTTP ${n.status}: ${n.statusText}`);if("success"!==o.status)throw new Error(o.message||"API request failed");return o}catch(e){throw console.error("SaaS Plan Check Error:",e),e}}function o(e){return!e||"string"!=typeof e||["Paid - Professional","Trial - Professional","Trial - Ultimate","Trial Premium"].includes(e.trim())}function r(e){const t=document.getElementById("automator-ai-agents-style");t&&t.remove();const n=document.createElement("style");n.id="automator-ai-agents-style",n.type="text/css";const o=e?"flex":"none";n.innerHTML=`#sb_AI\\ Agents { display: ${o} !important; } #sb_conversation_ai_settings_v2 { display: ${o} !important; } #sb_knowledge_base_settings { display: ${o} !important; } #sb_ai_agent_settings { display: ${o} !important; }`,document.head.appendChild(n),console.log(`AI Agents CSS injected: display: ${o}`)}function s(e){if("QJ103qxfEO9Dj2mFP0BJ"===e.location_id)return r(!0),void console.log("SaaS Plan Check Results:",{status:"Special Location Override",plan:e.response.saas_plan||"Unknown",billing:e.response.saas_pricing||"Unknown",locationId:e.location_id,aiAgentsVisibility:"visible (override)"});const t=o(e.response.saas_plan);r(!t);const n=t?"Premium Plan Active":"Basic Plan Active",s=t?"hidden":"visible";console.log("SaaS Plan Check Results:",{status:n,plan:e.response.saas_plan||"Unknown",billing:e.response.saas_pricing||"Unknown",locationId:e.location_id||"N/A",aiAgentsVisibility:s})}function l(){console.log("SaaS Check: Starting API request...")}function a(e){r(!1),console.error("SaaS Check Failed:",{error:e,aiAgentsVisibility:"hidden"})}async function i(){const e=t();if(!e)return console.warn("SaaS Check: No location_id found in URL"),void r(!1);console.log("SaaS Check: Found location_id:",e);try{l();const t=await n(e);t.location_id=e,s(t)}catch(e){a(e.message)}}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i();let c=window.location.href;new MutationObserver((()=>{window.location.href!==c&&(c=window.location.href,setTimeout(i,1e3))})).observe(document.body,{childList:!0,subtree:!0}),window.checkSaasPlan=i})();
